<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>실시간 투자 분석 대시보드</title>
    <link rel="stylesheet" href="assets/css/investment-dashboard.css?v=1.1">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- 네비게이션 메뉴 -->
    <nav class="navigation-menu">
        <div class="nav-container">
            <a href="index.html" class="nav-logo">📈 투자 분석</a>
            <div class="nav-links">
                <a href="realtime-dashboard.html" class="nav-link">실시간 대시보드</a>
                <a href="dashboard.html" class="nav-link active">종목 분석</a>
                <a href="market-trends.html" class="nav-link">시장 동향</a>
                                            <a href="investment-tools.html" class="nav-link">투자 도구</a>
            </div>
        </div>
    </nav>

    <div class="investment-dashboard">
        <!-- 헤더 -->
        <div class="dashboard-header">
            <div class="header-top">
                <a href="index.html" class="home-link">🏠 홈으로</a>
            </div>
            <h1>🔍 종목별 투자 분석 대시보드</h1>
            <p>특정 종목의 실시간 뉴스, 주가 차트, 가치투자 분석을 제공합니다</p>
            <p style="margin-top: 10px; font-size: 0.9em; opacity: 0.8; background: rgba(255,255,255,0.15); display: inline-block; padding: 6px 16px; border-radius: 20px;">📅 데이터 업데이트: 2026년 2월 9일</p>
        </div>

        <!-- 종목 검색 -->
        <div class="search-section">
            <h2>🔍 종목 검색</h2>
            <div class="stock-search-container">
                <input type="text" id="stock-search" placeholder="종목명 또는 종목코드를 입력하세요 (삼성전자, 대한항공, 와이지엔터테인먼트, 한화에어로스페이스, 현대차, 농심)">
                <button class="search-button" id="search-button">검색</button>
            </div>
            <div id="stock-list"></div>
        </div>
        
        <!-- 수동 크롤링 섹션 -->
        <div class="manual-crawling-section">
            <h2>🔄 수동 데이터 업데이트</h2>
            <p>최신 주식 데이터를 수동으로 수집하여 업데이트합니다</p>
            <div class="crawling-controls">
                <button id="manual-crawl-btn" class="crawl-button" onclick="manualCrawl()">
                    <span class="btn-icon">📊</span>
                    <span class="btn-text">데이터 수집 시작</span>
                </button>
                <div id="crawling-status" class="crawling-status" style="display: none;">
                    <div class="status-indicator">
                        <span class="spinner"></span>
                        <span class="status-text">데이터 수집 중...</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- 메인 대시보드 -->
        <div class="dashboard-grid">
            <!-- 종목 정보 및 차트 -->
            <div class="stock-info-section">
                <div id="stock-info">
                    <div class="loading">종목을 선택하면 정보가 표시됩니다...</div>
                </div>
            </div>

            <!-- 차트 영역 -->
            <div class="chart-section">
                <h3>📊 주가 차트 & 기술적 지표</h3>
                <p>주가 추이와 이동평균선, 볼린저 밴드를 통한 기술적 분석</p>
                <div id="price-summary" class="price-summary" style="display: none;">
                    <div class="summary-item">
                        <span class="summary-label">최저가:</span>
                        <span class="summary-value min-price">-</span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-label">최고가:</span>
                        <span class="summary-value max-price">-</span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-label">현재가:</span>
                        <span class="summary-value current-price">-</span>
                    </div>
                </div>
                <div id="price-chart">
                    <div class="loading">차트를 로딩 중입니다...</div>
                </div>
            </div>
        </div>

        <!-- 뉴스 섹션 -->
        <div class="news-section">
            <div id="news-list">
                <div class="loading">뉴스를 로딩 중입니다...</div>
            </div>
        </div>

        <!-- 분석 정보 -->
        <div class="analysis-section">
            <div id="analysis-info">
                <div class="loading">분석 정보를 로딩 중입니다...</div>
            </div>
        </div>

        <!-- 매수 신호 -->
        <div class="buy-signal-section">
            <div id="buy-signal">
                <div class="loading">매수 신호를 분석 중입니다...</div>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="assets/js/investment-dashboard.js"></script>
    
    <!-- Chart.js 라이브러리 -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Chart.js Annotation 플러그인 -->
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation"></script>
    
    <script>
        // 추가 기능들
        function searchStocks() {
            const searchInput = document.getElementById('stock-search');
            const query = searchInput.value.trim();
            
            if (query.length >= 2) {
                // 대시보드 인스턴스에 검색 요청
                if (window.investmentDashboard) {
                    window.investmentDashboard.handleStockSearch(query);
                }
            }
        }
        
        // 수동 크롤링 실행
        function manualCrawl() {
            if (window.investmentDashboard) {
                window.investmentDashboard.manualCrawl();
            }
        }

        // 엔터키로 검색
        document.getElementById('stock-search').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                searchStocks();
            }
        });

        // 전역 대시보드 인스턴스 저장
        document.addEventListener('DOMContentLoaded', () => {
            window.investmentDashboard = new InvestmentDashboard();
        });
    </script>
</body>
</html>
